document.addEventListener("DOMContentLoaded",function(e){let d=[];const o=e=>{var t=e=>e?"none":"";document.getElementById("emptyLabel").style.display=t(!0),document.getElementById("btnDecodePro").disabled=t(e),document.getElementById("progressBar").style.display=t(!e),document.getElementById("resultTable").style.display=t(e)},l=(document.getElementById("btnCopyResult").addEventListener("click",function(){let t="Decoded by https://decoderpo.com/\n";d.map(e=>{t+=e.code+":\n",e.description.map(e=>{t+="    - "+e+"\n"}),t+="\n"});try{navigator.clipboard.writeText(t),document.getElementById("btnCopyResult").innerHTML="Copied!"}catch(e){throw document.getElementById("btnCopyResult").innerHTML="Error!",e}finally{setTimeout(function(){document.getElementById("btnCopyResult").innerHTML="Copy Results"},3e3)}}),document.getElementById("RPOCodesForm").addEventListener("submit",function(e){e.preventDefault(),o(!0);const t=document.getElementById("inputRpoCodes").value,n=t.split(" ").reduce((e,t)=>e.concat(t.split(",")),[]).reduce((e,t)=>e.concat(t.split("-")),[]).map(e=>e.replace(/\s+/g,"").replace(",","").toUpperCase()).filter(e=>0<e.length);e=n.map(e=>fetch("/api/getRPODescription/"+e));Promise.all(e).then(e=>{Promise.all(e.map(e=>200===e.status?e.json():["Not found"])).then(e=>{o(!1),e=e.map(e=>"Not found"===e[0]?e:JSON.parse(atob(e[0]))),l(n,e)}).catch(e=>{console.error(e)})}).catch(e=>{console.error(e)})}),(e,n)=>{d=1===e.length&&17===e[0].length?[{code:e[0],description:["Error: you entered VIN instead of RPO Code."]}]:e.map((e,t)=>3<e.length?{code:e,description:["Wrong format: RPO code should contains 3 chars"]}:{code:e,description:n[t]});let o="";d.map(e=>{var t='<ul class="list-unstyled">'+e.description.reduce((e,t)=>e+`<li>${t}</li>`)+"</ul>";o+="<tr><th>"+e.code+'</th><td class="text-break">'+t+"</td></tr>"}),document.getElementById("tableTbody").innerHTML=o})});