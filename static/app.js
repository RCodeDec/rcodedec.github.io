document.addEventListener("DOMContentLoaded",function(e){setTimeout(()=>{const e=new URLSearchParams(window.location.search);var t=e.get("codes");t&&(document.getElementById("inputRpoCodes").value=decodeURIComponent(t),n(t))});let r=[];const d=e=>{var t=e=>e?"none":"";document.getElementById("emptyLabel").style.display=t(!0),document.getElementById("btnDecodePro").disabled=t(e),document.getElementById("progressBar").style.display=t(!e),document.getElementById("resultTable").style.display=t(e)};if(document.getElementById("btnCopyResult")?.addEventListener("click",function(){const t=document.getElementById("btnCopyResult");let n="Decoded by https://decoderpo.com/\n";r.map(e=>{n+=e.code+":\n",e.description.map(e=>{n+="    - "+e+"\n"}),n+="\n"});try{navigator.clipboard.writeText(n),t.innerHTML="Copied to Clipboard!"}catch(e){throw t.innerHTML="Error!",e}finally{setTimeout(function(){t.innerHTML="Copy Results"},3e3)}}),document.getElementById("btnShareResult")?.addEventListener("click",function(){const e=document.getElementById("btnShareResult");var t=window.location.href;navigator.clipboard.writeText(t).then(()=>e.innerHTML="Copied to Clipboard!").catch(()=>e.innerHTML="Error!").finally(()=>setTimeout(()=>e.innerHTML="Share Results",3e3))}),document.getElementById("RPOCodesForm")?.addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();e=document.getElementById("inputRpoCodes").value;const t=new URL(window.location);t.searchParams.set("codes",e),window.history.pushState(null,"",t.toString()),n(e)}),document.getElementById("RPOEncodeForm")){d(!0);let n=[];fetch("/static/rpoCodes.json").then(e=>e.json()).then(e=>{d(!1),n=e.allRpoCodes}),document.getElementById("RPOEncodeForm")?.addEventListener("submit",function(e){e.preventDefault(),d(!0);const o=document.getElementById("inputRpoCodes").value.toLowerCase().split(" ");let r=[],t="";console.time("test_timer"),n.map(e=>{let t=0;const n=e[1].toLowerCase();o.map(e=>{n.includes(e)&&t++}),0<t&&r.push({weight:t,content:"<tr><th>"+e[0]+'</th><td class="text-break">'+e[1]+"</td></tr>"})}),r.sort((e,t)=>e.weight>t.weight?-1:e.weight<t.weight?1:0).map(e=>{t+=e.content}),console.timeEnd("test_timer"),d(!1),document.getElementById("tableTbody").innerHTML=t})}document.getElementById("MoparVinCodeForm")&&document.getElementById("MoparVinCodeForm")?.addEventListener("submit",function(e){e.preventDefault(),d(!0);e=document.getElementById("inputMoparVinCode").value.toUpperCase();/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(window.open("https://www.jeep.com/webselfservice/BuildSheetServlet?vin="+encodeURIComponent(e),"_blank").focus(),d(!1)):(document.getElementById("moparVinSearchResult").innerHTML=`
          <iframe width="100%" height="600px" src="https://www.jeep.com/webselfservice/BuildSheetServlet?vin=${encodeURIComponent(e)}">
          </iframe>
        `,setTimeout(()=>{d(!1)},2e3))});const n=e=>{d(!0);const t=e.split(" ").reduce((e,t)=>e.concat(t.split(",")),[]).reduce((e,t)=>e.concat(t.split("-")),[]).map(e=>e.replace(/\s+/g,"").replace(",","").toUpperCase()).filter(e=>0<e.length);e=t.map(e=>fetch("/api/getRPODescription/"+e));Promise.all(e).then(e=>{Promise.all(e.map(t=>{if(200===t.status)return t.json();try{let e=new URL(t.url);var n=e.pathname.slice(1).split("/").slice(-1)[0];fetch("/api/reportRpoNotFound/"+n)}catch(e){console.error(e)}return["Not found"]})).then(e=>{d(!1),e=e.map(e=>"Not found"===e[0]?e:JSON.parse(atob(e[0]))),o(t,e)}).catch(e=>{console.error(e)})}).catch(e=>{console.error(e)})},o=(e,n)=>{r=1===e.length&&17===e[0].length?[{code:e[0],description:["Error: you entered VIN instead of RPO Code."]}]:e.map((e,t)=>3<e.length?{code:e,description:["Wrong format: RPO code should contains 3 chars"]}:{code:e,description:n[t]});let o="";r.map(e=>{var t='<ul class="list-unstyled">'+e.description.reduce((e,t)=>e+`<li>${t}</li>`)+"</ul>";o+="<tr><th>"+encodeURIComponent(e.code)+'</th><td class="text-break">'+t+"</td></tr>"}),document.getElementById("tableTbody").innerHTML=o}});